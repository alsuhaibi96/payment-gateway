"use strict";!function(e,t){var r,a,n=!0;function o(e,t){var a=[],n=moment(e.start.toUTCString());return t||a.push("<span>"+n.format("HH:mm")+"</span> "),e.isPrivate?(a.push('<span class="bx bxs-lock-alt font-size-small align-middle"></span>'),a.push(" Private")):(e.isReadOnly?a.push('<span class="bx bx-block font-size-small align-middle"></span>'):e.recurrenceRule?a.push('<span class="bx bx-repeat font-size-small align-middle"></span>'):e.attendees.length?a.push('<span class="bx bxs-user font-size-small align-middle"></span>'):e.location&&a.push('<span class="bx bxs-map font-size-small align-middle"></span>'),a.push(" "+e.title)),a.join("")}function l(e){var t=$(e.target).closest('[role="menuitem"]')[0],a=g(t),n=r.getOptions(),o="";switch(a){case"toggle-daily":o="day";break;case"toggle-weekly":o="week";break;case"toggle-monthly":n.month.visibleWeeksCount=0,n.month.isAlways6Week=!1,o="month";break;case"toggle-weeks2":n.month.visibleWeeksCount=2,o="month";break;case"toggle-weeks3":n.month.visibleWeeksCount=3,o="month";break;case"toggle-narrow-weekend":n.month.narrowWeekend=!n.month.narrowWeekend,n.week.narrowWeekend=!n.week.narrowWeekend,o=r.getViewName(),t.querySelector("input").checked=n.month.narrowWeekend;break;case"toggle-start-day-1":n.month.startDayOfWeek=n.month.startDayOfWeek?0:1,n.week.startDayOfWeek=n.week.startDayOfWeek?0:1,o=r.getViewName(),t.querySelector("input").checked=n.month.startDayOfWeek;break;case"toggle-workweek":n.month.workweek=!n.month.workweek,n.week.workweek=!n.week.workweek,o=r.getViewName(),t.querySelector("input").checked=!n.month.workweek}r.setOptions(n,!0),r.changeView(o,!0),u(),m(),h()}function c(e){switch(g(e.target)){case"move-prev":r.prev();break;case"move-next":r.next();break;case"move-today":r.today();break;default:return}m(),h()}function s(e){var t=e.start?new Date(e.start.getTime()):new Date,a=e.end?new Date(e.end.getTime()):moment().add(1,"hours").toDate();n&&r.openCreationPopup({start:t,end:a})}function d(e){var t=e.target.value,a=e.target.checked,n=document.querySelector(".sidebar-calendars-item input"),o=Array.prototype.slice.call(document.querySelectorAll("#calendarList input")),r=!0;"all"===t?(r=a,o.forEach(function(e){var t=e.parentNode;e.checked=a,t.style.backgroundColor=a?t.style.borderColor:"transparent"}),CalendarList.forEach(function(e){e.checked=a})):(findCalendar(t).checked=a,r=o.every(function(e){return e.checked}),n.checked=!!r),i()}function i(){var e=Array.prototype.slice.call(document.querySelectorAll("#calendarList input"));CalendarList.forEach(function(e){r.toggleSchedules(e.id,!e.checked,!1)}),r.render(!0),e.forEach(function(e){var t=e.nextElementSibling;t.style.backgroundColor=e.checked?t.style.borderColor:"transparent"})}function u(){var e,t=document.getElementById("calendarTypeName"),a=document.getElementById("calendarTypeIcon"),n=r.getOptions(),o=r.getViewName();e="day"===o?(o="Daily","bx bx-calendar-alt mr-25"):"week"===o?(o="Weekly","bx bx-calendar-event mr-25"):2===n.month.visibleWeeksCount?(o="2 weeks","bx bx-calendar-check mr-25"):3===n.month.visibleWeeksCount?(o="3 weeks","bx bx-calendar-check mr-25"):(o="Monthly","bx bx-calendar mr-25"),t.innerHTML=o,a.className=e}function m(){var e=document.getElementById("renderRange"),t=r.getOptions(),a=r.getViewName(),n=[];"day"===a?n.push(moment(r.getDate().getTime()).format("YYYY-MM-DD")):"month"===a&&(!t.month.visibleWeeksCount||4<t.month.visibleWeeksCount)?n.push(moment(r.getDate().getTime()).format("YYYY-MM")):(n.push(moment(r.getDateRangeStart().getTime()).format("YYYY-MM-DD")),n.push("-"),n.push(moment(r.getDateRangeEnd().getTime()).format(" MM.DD"))),e.innerHTML=n.join("")}function h(){r.clear(),generateSchedule(r.getViewName(),r.getDateRangeStart(),r.getDateRangeEnd()),r.createSchedules(ScheduleList),i()}function g(e){return e.dataset?e.dataset.action:e.getAttribute("data-action")}(r=new t("#calendar",{defaultView:"month",useCreationPopup:n,useDetailPopup:!0,calendars:CalendarList,theme:{"common.border":"1px solid #DFE3E7","common.backgroundColor":"white","common.holiday.color":"#FF5B5C","common.saturday.color":"#304156","common.dayname.color":"#304156","month.dayname.borderLeft":"1px solid transparent","month.dayname.fontSize":"1rem","week.dayGridSchedule.borderRadius":"4px","week.timegridSchedule.borderRadius":"4px"},template:{milestone:function(e){return'<span class="bx bx-flag align-middle"></span> <span style="background-color: '+e.bgColor+'">'+e.title+"</span>"},allday:function(e){return o(e,!0)},time:function(e){return o(e,!1)}}})).on({clickSchedule:function(e){$(".tui-full-calendar-popup-top-line").css("background-color",e.calendar.color),$(".tui-full-calendar-calendar-dot").css("background-color",e.calendar.borderColor)},beforeCreateSchedule:function(e){!function(e){var t=e.calendar||findCalendar(e.calendarId),a={id:String(chance.guid()),title:e.title,isAllDay:e.isAllDay,start:e.start,end:e.end,category:e.isAllDay?"allday":"time",dueDateClass:"",color:t.color,bgColor:t.bgColor,dragBgColor:t.bgColor,borderColor:t.borderColor,location:e.location,raw:{class:e.raw.class},state:e.state};t&&(a.calendarId=t.id,a.color=t.color,a.bgColor=t.bgColor,a.borderColor=t.borderColor);r.createSchedules([a]),i()}(e)},beforeUpdateSchedule:function(e){e.schedule.start=e.start,e.schedule.end=e.end,r.updateSchedule(e.schedule.id,e.schedule.calendarId,e.schedule)},beforeDeleteSchedule:function(e){console.log("beforeDeleteSchedule",e),r.deleteSchedule(e.schedule.id,e.schedule.calendarId)},clickTimezonesCollapseBtn:function(e){return e?r.setTheme({"week.daygridLeft.width":"77px","week.timegridLeft.width":"77px"}):r.setTheme({"week.daygridLeft.width":"60px","week.timegridLeft.width":"60px"}),!0}}),a=tui.util.throttle(function(){r.render()},50),e.cal=r,u(),m(),h(),$(".menu-navigation").on("click",c),$('.dropdown-menu [role="menuitem"]').on("click",l),$(".sidebar-calendars").on("change",d),$(".sidebar-new-schedule-btn").on("click",s),e.addEventListener("resize",a)}(window,tui.Calendar),function(){var e=document.getElementById("calendarList"),t=[];CalendarList.forEach(function(e){t.push('<div class="sidebar-calendars-item"><label><input type="checkbox" class="tui-full-calendar-checkbox-round" value="'+e.id+'" checked><span style="border-color: '+e.borderColor+"; background-color: "+e.borderColor+';"></span><span>'+e.name+"</span></label></div>")}),e.innerHTML=t.join("\n")}(),$(document).ready(function(){if(0<$(".sidebar").length)new PerfectScrollbar(".sidebar",{wheelPropagation:!1});$(".sidebar-toggle-btn").on("click",function(){$(".sidebar").toggleClass("show"),$(".app-content-overlay").toggleClass("show")}),$(".app-content-overlay, .sidebar-new-schedule-btn").on("click",function(){$(".sidebar").removeClass("show"),$(".app-content-overlay").removeClass("show")})}),$(window).on("resize",function(){$(window).width()<991&&($(".sidebar").removeClass("show"),$(".app-content-overlay").removeClass("show"))});